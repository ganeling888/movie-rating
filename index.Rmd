---
title: "movie rating"
author: "GAN LING"
date: "2017年4月12日"
output: html_document
---

#### load data

```{r}
# before doing this, you need to use python to run the edit_users_movies_dat.py
# file to clean the dat data
# deal with users_clean.dat
users = read.csv("users_clean.dat", sep = "=", header = FALSE, col.names = c("UserID","Gender","Age","Occupation","Zip-code"))
# deal with movies_utf8_clean.dat
movie = read.csv("movies_utf8_clean.dat", sep = "=", header = FALSE, col.names = c("MovieID","Title","Genres"))
# deal with training_ratings_for_kaggle_comp.csv
# training_ratings = read.csv("training_ratings_for_kaggle_comp.csv")
# save(training_ratings, file = "training_ratings.RData")
load("training_ratings.RData")
```

#### combine the data

```{r}
combine_user = function (users, training_ratings){
    k = 1
    for (d in training_ratings$user){
        temp_row = data.frame(users[users$UserID == d, c(2,3,4)])
        if (k == 1){
            #print(temp_row)
            #temp_row[,1] = as.factor(temp_row[,1])
            
            #temp_get = matrix(temp_row, ncol = 3, nrow = 1)
            temp_get = temp_row
            #print(temp_get)
            k = 0
        }
        else{
            
            #temp_row[,1] = as.factor(temp_row[,1])
            #temp_row = matrix(temp_row, ncol = 3, nrow = 1)
            temp_get = rbind(temp_get, temp_row)
            #print(temp_get)
        }
    }
    #print(temp_get)
    cbind(training_ratings, temp_get)
}
newraitings = combine_user(users, training_ratings)
```